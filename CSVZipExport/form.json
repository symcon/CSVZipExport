{
    "elements": [
        {
            "type": "Select",
            "name": "ExportOption",
            "caption": "Export Options",
            "options": [
                {
                    "caption": "Single File per Variable",
                    "value": "single"
                },
                {
                    "caption": "Single File with multiple Variables",
                    "value": "multi"
                },
                {
                    "caption": "MySQL",
                    "value": "mysql"
                }
            ],
            "onChange": "CSV_UIChangeExportOption($id, $ExportOption);"
        },
        {
            "type": "RowLayout",
            "name": "FilterRow",
            "items": [
                {
                    "type": "ValidationTextBox",
                    "caption": "Filter",
                    "name": "Filter",
                    "width": "550px"
                },
                {
                    "type": "Button",
                    "caption": "Apply Filter",
                    "onClick": "CSV_UpdateFilter($id, $Filter);"
                }
            ],
            "visible": false
        },
        {
            "type": "SelectVariable",
            "caption": "Logged Variables",
            "options": [],
            "name": "ArchiveVariable",
            "width": "700px",
            "requiredLogging": 1,
            "visible": false
        },
        {
            "type": "List",
            "add": true,
            "delete": true,
            "caption": "Selected Variables",
            "name": "SelectedVariables",
            "columns": [
                {
                    "add": "",
                    "caption": "User defined name",
                    "edit": {
                        "type": "ValidationTextBox"
                    },
                    "name": "UserDefinedName",
                    "width": "300px"
                },
                {
                    "add": 0,
                    "caption": "Variable",
                    "edit": {
                        "type": "SelectVariable",
                        "requiredLogging": 1
                    },
                    "name": "SelectedVariable",
                    "width": "150px"
                }
            ]
        },
        {
            "type": "Label",
            "caption": "Single File per Variable will zip in a archive",
            "name": "SingleInfo"
        },
        {
            "type": "Label",
            "caption": "Single File with multiple Variables are not compatible with Symcon without edit",
            "name": "MultiInfo"
        },
        {
            "type": "CheckBox",
            "name": "ZipFile",
            "caption": "Create ZIP File"
        },
        {
            "type": "Select",
            "caption": "Decimal Separator",
            "name": "DecimalSeparator",
            "options": [
                {
                    "caption": "Comma",
                    "value": ","
                },
                {
                    "caption": "Dot",
                    "value": "."
                }
            ]
        },
        {
            "type": "SelectDateTime",
            "caption": "Aggregation Start",
            "name": "AggregationStart",
            "width": "700px"
        },
        {
            "type": "SelectDateTime",
            "caption": "Aggregation End",
            "name": "AggregationEnd",
            "width": "700px"
        },
        {
            "type": "Select",
            "caption": "Aggregation Stage",
            "options": [
                {
                    "caption": "Raw-Data",
                    "value": 7
                },
                {
                    "caption": "1-Minute",
                    "value": 6
                },
                {
                    "caption": "5-Minute",
                    "value": 5
                },
                {
                    "caption": "Hourly",
                    "value": 0
                },
                {
                    "caption": "Daily",
                    "value": 1
                },
                {
                    "caption": "Weekly",
                    "value": 2
                },
                {
                    "caption": "Monthly",
                    "value": 3
                },
                {
                    "caption": "Yearly",
                    "value": 4
                }
            ],
            "name": "AggregationStage",
            "width": "700px"
        },
        {
            "type": "Button",
            "caption": "Download Export Now",
            "onClick": "echo CSV_UserExport($id, intval($ArchiveVariable), intval($AggregationStage), $AggregationStart, $AggregationEnd);",
            "link": true
        },
        {
            "type": "ProgressBar",
            "name": "ExportBar",
            "indeterminate": true,
            "caption": "Exporting . . .",
            "visible": false
        },
        {
            "type": "ExpansionPanel",
            "caption": "Cyclic sending",
            "items": [
                {
                    "type": "CheckBox",
                    "caption": "Enable cyclic sending",
                    "name": "IntervalStatus"
                },
                {
                    "type": "Select",
                    "caption": "Interval",
                    "options": [
                        {
                            "caption": "Hourly",
                            "value": 0
                        },
                        {
                            "caption": "Daily",
                            "value": 1
                        },
                        {
                            "caption": "Weekly",
                            "value": 2
                        },
                        {
                            "caption": "Monthly",
                            "value": 3
                        },
                        {
                            "caption": "Yearly",
                            "value": 4
                        }
                    ],
                    "name": "MailInterval"
                },
                {
                    "type": "SelectTime",
                    "caption": "Time",
                    "name": "MailTime"
                },
                {
                    "type": "ExpansionPanel",
                    "caption": "Mail",
                    "items": [
                        {
                            "type": "CheckBox",
                            "name": "SendMail",
                            "caption": "Send per Mail"
                        },
                        {
                            "type": "SelectInstance",
                            "caption": "SMTP-Instance",
                            "name": "SMTPInstance"
                        },
                        {
                            "type": "Button",
                            "caption": "Send Mail Now",
                            "onClick": "CSV_SendCyclic($id, \"Mail\");"
                        }
                    ]
                },
                {
                    "type": "ExpansionPanel",
                    "caption": "FTP, FTPS, SFTP",
                    "items": [
                        {
                            "type": "CheckBox",
                            "caption": "Send per SFTP/FTP/FTPS",
                            "name": "SendFTP"
                        },
                        {
                            "type": "RowLayout",
                            "items": [
                                {
                                    "type": "Select",
                                    "caption": "Connection Type",
                                    "name": "ConnectionType",
                                    "options": [
                                        {
                                            "caption": "SFTP",
                                            "value": "SFTP"
                                        },
                                        {
                                            "caption": "FTP",
                                            "value": "FTP"
                                        },
                                        {
                                            "caption": "FTPS",
                                            "value": "FTPS"
                                        }
                                    ],
                                    "onChange": "CSV_UIChangePort($id, $ConnectionType);"
                                },
                                {
                                    "type": "ValidationTextBox",
                                    "name": "Host",
                                    "caption": "Host"
                                },
                                {
                                    "type": "NumberSpinner",
                                    "name": "Port",
                                    "caption": "Port",
                                    "minimum": 0
                                }
                            ]
                        },
                        {
                            "type": "RowLayout",
                            "items": [
                                {
                                    "type": "ValidationTextBox",
                                    "name": "Username",
                                    "caption": "Username"
                                },
                                {
                                    "type": "PasswordTextBox",
                                    "name": "Password",
                                    "caption": "Password"
                                }
                            ]
                        },
                        {
                            "type": "RowLayout",
                            "items": [
                                {
                                    "type": "ValidationTextBox",
                                    "name": "TargetDir",
                                    "caption": "Target Directory",
                                    "value": ""
                                },
                                {
                                    "type": "PopupButton",
                                    "caption": "Select Directory",
                                    "onClick": "CSV_UISelectDir($id, $Host, $Port, $Username, $Password, $ConnectionType);",
                                    "popup": {
                                        "buttons": [
                                            {
                                                "type": "Button",
                                                "caption": "Assume",
                                                "onClick": [
                                                    "CSV_UIAssumeDir(",
                                                    "$id, ",
                                                    "isset($SelectTargetDirectory['SelectedDirectory']) ? $CurrentDir.'/'.$SelectTargetDirectory['SelectedDirectory'] : $CurrentDir,",
                                                    "$Host,",
                                                    "$Port, ",
                                                    "$Username,",
                                                    "$Password,",
                                                    "$ConnectionType",
                                                    ");"
                                                ]
                                            }
                                        ],
                                        "items": [
                                            {
                                                "type": "ValidationTextBox",
                                                "name": "CurrentDir",
                                                "caption": "Current Directory",
                                                "value": "",
                                                "enabled": false
                                            },
                                            {
                                                "type": "List",
                                                "name": "SelectTargetDirectory",
                                                "caption": "Select Target Directory",
                                                "columns": [
                                                    {
                                                        "caption": "Directory",
                                                        "name": "SelectedDirectory",
                                                        "width": "auto",
                                                        "add": 0,
                                                        "confirm": "Go into this Directory?"
                                                    },
                                                    {
                                                        "onClick": "SB_UIGoDeeper($id,$CurrentDir.'/'.$SelectTargetDirectory['SelectedDirectory'],$Host, $Port, $Username, $Password, $ConnectionType);",
                                                        "caption": "Go into",
                                                        "name": "DeeperDir",
                                                        "width": "75px",
                                                        "add": 0
                                                    }
                                                ],
                                                "values": []
                                            }
                                        ],
                                        "caption": "Select the target directory"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "Button",
                            "caption": "Test Connection",
                            "onClick": "CSV_UITestConnection($id);"
                        },
                        {
                            "type": "Button",
                            "caption": "Send File now",
                            "onClick": "CSV_SendCyclic($id, \"FTP\");"
                        }
                    ]
                }
            ]
        }
    ],
    "status": [
        {
            "code": 201,
            "icon": "error",
            "caption": "A Variable is not selected"
        },
        {
            "code": 202,
            "icon": "error",
            "caption": "No valid SMTP-Instance selected"
        },
        {
            "code": 203,
            "icon": "error",
            "caption": "The selected SMTP-Instance doesn't exist"
        }
    ]
}